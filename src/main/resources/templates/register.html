<!doctype html>
<html class="no-js" lang="">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Xmee | Login and Register Form Html Templates</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="static/css/bootstrap.min.css">
    <!-- Fontawesome CSS -->
    <link rel="stylesheet" href="static/css/fontawesome-all.min.css">
    <!-- Flaticon CSS -->
    <link rel="stylesheet" href="static/css/flaticon.css">
    <!-- Google Web Fonts -->
    <link href="static/css/css.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="static/css/style.css">

    <link rel="stylesheet" href="static/css/toastr.min.css">
</head>

<body>
<!--[if lt IE 8]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
    your browser</a> to improve your experience.</p>
<![endif]-->
<div id="preloader" class="preloader">
    <div class='inner'>
        <div class='line1'></div>
        <div class='line2'></div>
        <div class='line3'></div>
    </div>
</div>
<section class="fxt-template-animation fxt-template-layout3" data-bg-image="">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 col-12 fxt-none-991">
                <div class="fxt-header">
                    <div class="fxt-transformY-50 fxt-transition-delay-1">
                        <a href="login" class="fxt-logo"><img src="static/picture/logo.png" alt="Logo"></a>
                    </div>
                    <div class="fxt-transformY-50 fxt-transition-delay-2">
                        <h1>Welcome To xmee</h1>
                    </div>
                    <div class="fxt-transformY-50 fxt-transition-delay-3">
                        <p>Grursus mal suada faci lisis Lorem ipsum dolarorit more ametion consectetur elit. Vesti at
                            bulum nec odio aea the dumm ipsumm ipsum that dolocons rsus mal suada and fadolorit to the
                            dummy consectetur elit the Lorem Ipsum genera.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-12 fxt-bg-color">
                <div class="fxt-content">
                    <div class="fxt-form">
                        <h2>Register</h2>
                        <p class="mb-5">Create an account</p>
                        <div class="form-group">
                            <label for="username" class="input-label">Username</label>
                            <input type="text" id="username" class="form-control" name="username" placeholder="username"
                                   required="required">
                        </div>
                        <!--                            <div class="form-group">-->
                        <!--                                <label for="email" class="input-label">Email Address</label>-->
                        <!--                                <input type="email" id="email" class="form-control" name="email"-->
                        <!--                                       placeholder="demo@gmail.com" required="required">-->
                        <!--                            </div>-->
                        <div class="form-group">
                            <label for="password" class="input-label">Password</label>
                            <input id="password" type="password" class="form-control" name="password"
                                   placeholder="********" required="required">
                            <i toggle="#password" class="fa fa-fw fa-eye toggle-password field-icon"></i>
                        </div>
                        <div class="form-group">
                            <label for="confirmPassword" class="input-label">Confirm Password</label>
                            <input id="confirmPassword" type="password" class="form-control" name="confirmPassword"
                                   placeholder="********" required="required">
                            <i toggle="#re-password" class="fa fa-fw fa-eye toggle-password field-icon"></i>
                        </div>
                        <div class="form-group">
                            <button type="submit" class="fxt-btn-fill" onclick="btnRegister()">Register</button>
                        </div>
                    </div>
                    <div class="fxt-footer">
                        <p>Have an account?<a href="login" class="switcher-text2 inline-text">Log in</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- jquery-->
<script src="static/js/jquery-3.5.0.min.js"></script>
<!-- Bootstrap js -->
<script src="static/js/bootstrap.min.js"></script>
<!-- Imagesloaded js -->
<script src="static/js/imagesloaded.pkgd.min.js"></script>
<!-- Validator js -->
<script src="static/js/validator.min.js"></script>
<!-- Custom Js -->
<script src="static/js/main.js"></script>

<script src="static/js/toastr.min.js"></script>

<script src="static/js/aes.js"></script>

<script src="static/js/crypto-js.js"></script>

<script>
    toastr.options = {
        closeButton: false, // 是否显示关闭按钮，（提示框右上角关闭按钮）
        debug: false, // 是否使用deBug模式
        progressBar: true, // 是否显示进度条，（设置关闭的超时时间进度条）
        // positionClass: 'toast-center-center', // 设置提示款显示的位置
        positionClass: 'toast-center-right', // 设置提示款显示的位置
        onclick: null, // 点击消息框自定义事件
        showDuration: "1000", // 显示动画的时间
        hideDuration: "1000", //  消失的动画时间
        timeOut: "2000", //  自动关闭超时时间
        extendedTimeOut: "1000", //  加长展示时间
        showEasing: "swing", //  显示时的动画缓冲方式
        hideEasing: "linear", //   消失时的动画缓冲方式
        showMethod: "fadeIn", //   显示时的动画方式
        hideMethod: "fadeOut" //   消失时的动画方式
    };

    function btnRegister() {
        var username = $("#username").val();
        var password = $("#password").val();
        var confirmPassword = $("#confirmPassword").val();

        if (username == "") {
            toastr.warning("请输入用户名！");
            return false;
        }
        if (password == "") {
            toastr.warning("请输入密码！");
            return false;
        }
        if (confirmPassword == "") {
            toastr.warning("请重复输入密码！");
            return false;
        }
        if (password != confirmPassword) {
            toastr.warning("两次密码不相同！");
            return false;
        }

        register(username, password);
    }

    function register(u, p) {

        var param = {
            username: encrypt_str(u),
            password: encrypt_str(p)
        }
        var param = JSON.stringify(param);

        // console.log(param)

        $.ajax({
            url: "/doRegister",
            type: "POST",
            contentType: "application/json", //！！与后端对齐！！
            dataType: "json",//预期服务器返回的数据类型
            data: param,
            success: function (result) {
                console.log(result);//打印服务端返回的数据(调试用)
                if (result.code == 200) {
                    toastr.success("注册成功");
                } else {
                    toastr.error(result.message);
                }
            },
            error: function (result) {
                console.log(result)
            }
        });
    }
</script>

</body>

</html>